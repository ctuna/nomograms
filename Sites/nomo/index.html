<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <meta charset='utf-8'>
    <title>nomograms</title>
    <script src='d3.v3.js' type='text/javascript'></script>
    <link href='style.css' rel='stylesheet' type='text/css' />
  </meta>
  <body>
    <script type='text/javascript'>
      var w = 200;
      var h = 200;
      var padding = 30;
      var yScale = d3.scale.linear().domain([0, w]).range([h-padding, padding]);
      var yAxis = d3.svg.axis().orient("left").scale(yScale).ticks(10);
      <!-- /Create SVG element -->
      var svg = d3.select("body").append("svg").attr("width", w).attr("height", h);
      svg.append("g").attr("class", "axis").attr("transform", "translate(" + padding + ",0)").call(yAxis);
      svg.on("mousedown", mousedown).on("mouseup", mouseup);

	function mousedown() {
	    var m = d3.mouse(this);
		d3.select("#nomoline").remove();
	    line = svg.append("line")
			.attr("id", "nomoline")
	        .attr("x1", padding)
	        .attr("y1", m[1])
	        .attr("x2", w - padding)
	        .attr("y2", m[1]);

	    svg.on("mousemove", mousemove);
	}

	function mousemove() {
	    var m = d3.mouse(this);
	    line
	        .attr("y1", m[1]);
	}

	function mouseup() {
	    svg.on("mousemove", null);
	}
    </script>
  </body>
</html>
